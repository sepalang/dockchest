defines:
  NAME: &NAME dchest-localvolume
  VERSION: &VERSION 0.1.3
  C_SERVER_PORT: &C_SERVER_PORT 8080
  H_SERVER_PORT: &H_SERVER_PORT 8080
arg:
  SERVER_PORT: *C_SERVER_PORT
build:
  tag: [*NAME, *VERSION]
  ignore: |
    node_modules
    npm-debug.log
  script: |
    FROM node:12
    ARG SERVER_PORT
    WORKDIR /usr/src/app
    COPY ./* ./
    RUN npm install
    CMD npx live-server --port=${SERVER_PORT} --bind=0.0.0.0
run:
  name: "express-server"
  publishes: 
    - [*H_SERVER_PORT, *C_SERVER_PORT]
  volumes: 
    - [../volume, /usr/src/app/volume]
